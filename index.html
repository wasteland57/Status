<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Status Board</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
        }
        h1 {
            color: #333;
        }
        .user-list-container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .user-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 4px;
            transition: background-color 0.3s ease;
            border: 1px solid #ddd;
        }
        .user-name {
            font-size: 1.1em;
            margin-right: 15px;
        }
        .status-dropdown {
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #ccc;
            min-width: 200px; /* Adjust as needed */
        }

        /* Color classes for status */
        .status-default { background-color: #e0e0e0; color: black; } /* Light grey for default */
        .status-need-work { background-color: orange; color: white; }
        .status-need-help { background-color: red; color: white; }
        .status-good { background-color: green; color: white; }
        .status-can-do-more { background-color: blue; color: white; }

        /* Optional: Style the text color within the item based on background for contrast */
        .status-need-work .user-name, .status-need-work .status-dropdown,
        .status-need-help .user-name, .status-need-help .status-dropdown,
        .status-good .user-name, .status-good .status-dropdown,
        .status-can-do-more .user-name, .status-can-do-more .status-dropdown {
            /* color: white; You might need to adjust select text color if possible or use a wrapper */
        }
         .status-default .user-name { color: black; }

    </style>
</head>
<body>

    <h1>Team Status</h1>

    <div class="user-list-container" id="userListContainer">
        </div>

    <script>
        const userNames = [
            "Brendan Varga", "Doug Kennedy", "Gerrit Cramer", "Henry Vitella", "Isaac Miller",
            "John Stebelton", "Joseph (Joe) Beattie", "Kayla Plancon", "Kyle Buchner", "Kyle Miller",
            "Melanie Sobas", "Paul Bater", "Renee Kehren", "Robert (Rob) Mooney", "Scott Sieg",
            "Steve Rowland", "Will Houser"
        ];

        const statusConfig = {
            "select": { text: "-- Select Status --", colorClass: "status-default" },
            "need-work": { text: "I need work", colorClass: "status-need-work" },
            "need-help": { text: "I need help", colorClass: "status-need-help" },
            "good": { text: "I'm good", colorClass: "status-good" },
            "can-do-more": { text: "I can do more If necessary", colorClass: "status-can-do-more" }
        };

        const userListContainer = document.getElementById('userListContainer');

        // Function to initialize or update the user list display
        function displayUsers(usersData) { // usersData would come from the backend
            userListContainer.innerHTML = ''; // Clear existing list

            usersData.forEach(userData => {
                const userItem = document.createElement('div');
                userItem.classList.add('user-item');
                userItem.dataset.userName = userData.name; // Store name for identification

                const userNameSpan = document.createElement('span');
                userNameSpan.classList.add('user-name');
                userNameSpan.textContent = userData.name;

                const statusDropdown = document.createElement('select');
                statusDropdown.classList.add('status-dropdown');
                statusDropdown.dataset.userName = userData.name; // For easy identification on change

                // Populate dropdown options
                for (const key in statusConfig) {
                    const option = document.createElement('option');
                    option.value = key;
                    option.textContent = statusConfig[key].text;
                    if (key === userData.status) {
                        option.selected = true;
                    }
                    statusDropdown.appendChild(option);
                }

                // Set initial color
                updateUserItemColor(userItem, userData.status || "select");

                // Event listener for dropdown changes
                statusDropdown.addEventListener('change', function(event) {
                    const newStatus = event.target.value;
                    const userName = event.target.dataset.userName;
                    
                    // 1. Update UI immediately (local visual feedback)
                    updateUserItemColor(userItem, newStatus);

                    // 2. Send change to the backend
                    console.log(`Status changed for ${userName}: ${newStatus}. Sending to backend...`);
                    // saveStatusToBackend(userName, newStatus); // UNCOMMENT AND IMPLEMENT THIS
                });

                userItem.appendChild(userNameSpan);
                userItem.appendChild(statusDropdown);
                userListContainer.appendChild(userItem);
            });
        }

        function updateUserItemColor(userItemElement, statusValue) {
            // Remove existing status color classes
            Object.values(statusConfig).forEach(config => {
                userItemElement.classList.remove(config.colorClass);
            });
            // Add new status color class
            userItemElement.classList.add(statusConfig[statusValue]?.colorClass || statusConfig["select"].colorClass);
        }

        // --- Backend Integration (Conceptual) ---
        // This is where you'd use a service like Firebase, Supabase, or your own backend.

        // Example: Function to save status to a backend
        /*
        async function saveStatusToBackend(userName, status) {
            // Example with Firebase Realtime Database (conceptual)
            // await database.ref('userStatuses/' + encodeURIComponent(userName)).set(status);
            console.log(`Mock API: ${userName} status set to ${status}`);
            // After successful save, the backend might push updates, or you might re-fetch.
        }
        */

        // Example: Function to listen for real-time updates from the backend
        /*
        function listenForStatusChanges() {
            // Example with Firebase Realtime Database (conceptual)
            // database.ref('userStatuses').on('value', (snapshot) => {
            //     const statuses = snapshot.val(); // Object like { "User Name": "status-value", ... }
            //     if (statuses) {
            //         const updatedUsersData = userNames.map(name => ({
            //             name: name,
            //             status: statuses[name] || "select"
            //         }));
            //         displayUsers(updatedUsersData);
            //     }
            // });

            // For now, simulate initial load or periodic refresh if no real-time DB
            // This is just a placeholder for real backend integration
            console.log("Mock API: Listening for status changes (simulated initial load).");
            const initialStatuses = {}; // In a real app, this would be fetched
            userNames.forEach(name => {
                // Try to load from localStorage as a simple persistence demo (NOT for multi-user sync)
                // initialStatuses[name] = localStorage.getItem(`status_${name}`) || "select"; 
                initialStatuses[name] = "select"; // Default for demo
            });

             const initialUsersData = userNames.map(name => ({
                name: name,
                status: initialStatuses[name] || "select"
            }));
            displayUsers(initialUsersData);
        }
        */
        
        // More robust initial load for demonstration without a backend:
        // We need to initialize the display with all users and their current (default or fetched) statuses.
        // The `displayUsers` function should be called with data that represents the current state for everyone.
        function initializeApp() {
            // In a real application, you would fetch the current statuses for all users from your backend here.
            // For this example, we'll initialize everyone with a default status.
            const initialUserData = userNames.map(name => ({
                name: name,
                status: "select" // Default status
            }));
            displayUsers(initialUserData);

            // After initial display, you would start listening for real-time updates.
            // listenToBackendForUpdates(); // UNCOMMENT AND IMPLEMENT THIS
            console.warn("Backend integration for real-time updates and data persistence is required for multi-user functionality.");
        }


        // --- Placeholder for real-time update listening ---
        // This function would be called by your backend integration when a status changes for any user.
        function handleRemoteUpdate(userName, newStatus) {
            console.log(`Remote update received: ${userName} is now ${newStatus}`);
            const userItem = userListContainer.querySelector(`.user-item[data-user-name="${userName}"]`);
            if (userItem) {
                const dropdown = userItem.querySelector('.status-dropdown');
                dropdown.value = newStatus;
                updateUserItemColor(userItem, newStatus);
            } else {
                // If user not found, might need to refresh the whole list if users can be added/removed dynamically
                console.warn(`User ${userName} not found in current display for remote update.`);
            }
        }

        // Initialize the application
        // For a real application, you'd call something that fetches initial data from backend
        // and then sets up listeners. For this example, we'll just build the initial list.
         const initialUsersData = userNames.map(name => ({
            name: name,
            status: "select" // Default for everyone at start
        }));
        displayUsers(initialUsersData);
        
        console.warn("Reminder: For changes to be seen by all users in real-time, backend integration (e.g., Firebase, Supabase) is necessary.");
        console.log("The current version only reflects changes locally in this browser tab.");

    </script>

</body>
</html>